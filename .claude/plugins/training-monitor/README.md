# Training Monitor Plugin

YOLO è¨“ç·´å³æ™‚ç›£æ§å·¥å…·ï¼Œè¿½è¹¤è¨“ç·´é€²åº¦ä¸¦åµæ¸¬ç•°å¸¸ã€‚

## åŠŸèƒ½ç‰¹è‰²

### ğŸ“Š å³æ™‚ç›£æ§
- è¨“ç·´é€²åº¦è¿½è¹¤
- æå¤±å‡½æ•¸æ›²ç·š
- æŒ‡æ¨™è®ŠåŒ–è¶¨å‹¢
- ETA é ä¼°

### âš ï¸ ç•°å¸¸åµæ¸¬
- Loss çˆ†ç‚¸/æ¶ˆå¤±
- æ¢¯åº¦ç•°å¸¸
- éæ“¬åˆæ—©æœŸè­¦å‘Š
- è¨“ç·´åœæ»¯æª¢æ¸¬

### ğŸ“ˆ æ•ˆèƒ½åˆ†æ
- è¨“ç·´é€Ÿåº¦ç›£æ§
- GPU/MPS ä½¿ç”¨ç‡
- è¨˜æ†¶é«”æ¶ˆè€—
- è³‡æ–™è¼‰å…¥ç“¶é ¸

### ğŸ”” æ™ºæ…§é€šçŸ¥
- è¨“ç·´å®Œæˆæé†’
- ç•°å¸¸ç‹€æ³è­¦å‘Š
- é‡Œç¨‹ç¢‘é”æˆé€šçŸ¥
- æœ€ä½³æ¨¡å‹æ›´æ–°

## ä½¿ç”¨æ–¹å¼

### å‘½ä»¤
```bash
# ç›£æ§æœ€æ–°è¨“ç·´
/training-monitor

# ç›£æ§æŒ‡å®šå¯¦é©—
/training-monitor --exp runs/train/exp5

# å³æ™‚è·Ÿè¹¤ï¼ˆæ¯ 10 ç§’æ›´æ–°ï¼‰
/training-monitor --watch

# ç”Ÿæˆå®Œæ•´åˆ†æå ±å‘Š
/training-monitor --report
```

### è¼¸å‡ºç¯„ä¾‹

```
=== YOLO è¨“ç·´ç›£æ§ ===

ğŸ“‚ å¯¦é©—: runs/train/exp
ğŸ¯ æ¨¡å‹: YOLO11n
ğŸ“… é–‹å§‹æ™‚é–“: 2026-01-09 15:30:00

â±ï¸ è¨“ç·´é€²åº¦:
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 45/100 epochs (45%)
  ç›®å‰ Epoch: 45/100
  å·²ç”¨æ™‚é–“: 1.5 åˆ†é˜
  é ä¼°å‰©é¤˜: 1.8 åˆ†é˜
  å®Œæˆæ™‚é–“: ~15:33:18

ğŸ“Š ç•¶å‰æŒ‡æ¨™:
  Box Loss:    0.8234 â†“ (-5.2%)
  Class Loss:  0.4521 â†“ (-3.8%)
  DFL Loss:    1.0234 â†“ (-4.1%)

  mAP@0.5:     0.8921 â†‘ (+2.1%)
  Precision:   0.8756 â†‘ (+1.5%)
  Recall:      0.8532 â†‘ (+1.8%)

ğŸ¯ æœ€ä½³çµæœ (Epoch 42):
  mAP@0.5:     0.9123
  mAP@0.5:0.95: 0.7234
  å·²å„²å­˜: best.pt

âš¡ æ•ˆèƒ½ç›£æ§:
  è¨“ç·´é€Ÿåº¦: 2.1s/epoch
  GPU ä½¿ç”¨: 78% (MPS)
  è¨˜æ†¶é«”: 1.2GB / 16GB
  è³‡æ–™è¼‰å…¥: 0.3s/batch

âœ… å¥åº·ç‹€æ…‹: è‰¯å¥½
  âœ“ æå¤±å‡½æ•¸æ­£å¸¸ä¸‹é™
  âœ“ ç„¡æ¢¯åº¦çˆ†ç‚¸æˆ–æ¶ˆå¤±
  âœ“ ç„¡éæ“¬åˆè·¡è±¡
  âœ“ è¨“ç·´é€Ÿåº¦ç©©å®š

ğŸ“ˆ è¶¨å‹¢åˆ†æ:
  éå» 10 epochs:
  - mAP ç©©å®šæå‡ (+0.8% avg)
  - Loss æŒçºŒä¸‹é™ (-4.5% avg)
  - è¨“ç·´ç©©å®šï¼Œç„¡ç•°å¸¸æ³¢å‹•

ğŸ’¡ å»ºè­°:
  â€¢ è¨“ç·´ç‹€æ…‹è‰¯å¥½ï¼Œç¹¼çºŒè¨“ç·´
  â€¢ é è¨ˆåœ¨ epoch 85 é”åˆ°æœ€ä½³æ•ˆæœ
  â€¢ å¯è€ƒæ…®ææ—©åœæ­¢ä»¥ç¯€çœæ™‚é–“

â° ä¸‹æ¬¡æ›´æ–°: 10 ç§’å¾Œ
æŒ‰ Ctrl+C åœæ­¢ç›£æ§
```

### å³æ™‚æ¨¡å¼è¼¸å‡º

```
[15:32:45] Epoch 46/100 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 46% | ETA: 1.7m
           Box: 0.8156 â†“ | Cls: 0.4487 â†“ | DFL: 1.0198 â†“ | mAP: 0.8945 â†‘

[15:32:47] Epoch 47/100 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 47% | ETA: 1.6m
           Box: 0.8089 â†“ | Cls: 0.4445 â†“ | DFL: 1.0167 â†“ | mAP: 0.8967 â†‘

[15:32:49] â­ æ–°çš„æœ€ä½³ mAP: 0.8967 (epoch 47) - æ¨¡å‹å·²å„²å­˜

[15:32:49] Epoch 48/100 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 48% | ETA: 1.5m
           Box: 0.8034 â†“ | Cls: 0.4398 â†“ | DFL: 1.0145 â†“ | mAP: 0.8989 â†‘
```

### ç•°å¸¸è­¦å‘Šç¯„ä¾‹

```
[15:35:12] âš ï¸  è­¦å‘Š: Loss çªç„¶å¢åŠ 
           Box Loss: 0.8034 â†’ 1.2456 (+55%)
           å¯èƒ½åŸå› : å­¸ç¿’ç‡éé«˜æˆ–è³‡æ–™ç•°å¸¸
           å»ºè­°: æª¢æŸ¥æœ€è¿‘çš„ batch è³‡æ–™

[15:38:45] âš ï¸  è­¦å‘Š: è¨“ç·´åœæ»¯
           éå» 15 epochs mAP ç„¡æ˜é¡¯æå‡ (0.8989 â†’ 0.8995)
           å»ºè­°: è€ƒæ…®ææ—©åœæ­¢æˆ–èª¿æ•´å­¸ç¿’ç‡

[15:42:20] âš ï¸  æ³¨æ„: å¯èƒ½çš„éæ“¬åˆ
           Train mAP: 0.95 | Val mAP: 0.87 (å·®è· 8.4%)
           å»ºè­°: å¢å¼·æ­£å‰‡åŒ–æˆ–æ¸›å°‘è¨“ç·´è¼ªæ•¸
```

## ç›£æ§é …ç›®

### åŸºç¤æŒ‡æ¨™
- âœ… Epoch é€²åº¦
- âœ… Loss å€¼ï¼ˆBox/Class/DFLï¼‰
- âœ… mAPã€Precisionã€Recall
- âœ… è¨“ç·´/é©—è­‰é›†æŒ‡æ¨™

### æ•ˆèƒ½æŒ‡æ¨™
- âœ… æ¯ epoch æ™‚é–“
- âœ… GPU/MPS ä½¿ç”¨ç‡
- âœ… è¨˜æ†¶é«”æ¶ˆè€—
- âœ… è³‡æ–™è¼‰å…¥æ™‚é–“

### å¥åº·æª¢æŸ¥
- âœ… Loss è¶¨å‹¢ï¼ˆæ˜¯å¦ä¸‹é™ï¼‰
- âœ… æ¢¯åº¦æª¢æŸ¥ï¼ˆçˆ†ç‚¸/æ¶ˆå¤±ï¼‰
- âœ… éæ“¬åˆæª¢æ¸¬
- âœ… è¨“ç·´ç©©å®šæ€§

### é è­¦ç³»çµ±
- âœ… Loss ç•°å¸¸æ³¢å‹•
- âœ… æŒ‡æ¨™åœæ»¯
- âœ… è³‡æºç“¶é ¸
- âœ… NaN/Inf å€¼

## ç•°å¸¸æª¢æ¸¬è¦å‰‡

### Critical (ç«‹å³åœæ­¢)
- Loss è®Šæˆ NaN æˆ– Inf
- GPU è¨˜æ†¶é«”æº¢å‡º
- æª”æ¡ˆç³»çµ±éŒ¯èª¤

### High (éœ€è¦æ³¨æ„)
- Loss çªå¢ > 50%
- æ¢¯åº¦çˆ†ç‚¸ï¼ˆ> 100ï¼‰
- åš´é‡éæ“¬åˆï¼ˆgap > 15%ï¼‰

### Medium (ç›£æ§)
- è¨“ç·´åœæ»¯ > 20 epochs
- è¼•å¾®éæ“¬åˆï¼ˆgap > 10%ï¼‰
- è¨˜æ†¶é«”ä½¿ç”¨ > 90%

### Low (è³‡è¨Š)
- æ–°çš„æœ€ä½³æ¨¡å‹
- é”åˆ°é‡Œç¨‹ç¢‘
- æ•ˆèƒ½å»ºè­°

## é…ç½®é¸é …

```json
{
  "watch_mode": {
    "update_interval": 10,
    "show_plots": true,
    "max_history": 100
  },
  "alerts": {
    "enable_notifications": true,
    "loss_spike_threshold": 0.5,
    "stagnation_epochs": 20,
    "overfit_gap_threshold": 0.1
  },
  "performance": {
    "track_gpu_usage": true,
    "track_memory": true,
    "track_data_loading": true
  },
  "report": {
    "save_interval": 10,
    "include_plots": true,
    "format": "markdown"
  }
}
```

## è¼¸å‡ºæª”æ¡ˆ

### å³æ™‚æ—¥èªŒ
- `monitoring/training_log.txt` - å®Œæ•´è¨“ç·´æ—¥èªŒ
- `monitoring/metrics.json` - æŒ‡æ¨™æ•¸æ“šï¼ˆJSONï¼‰
- `monitoring/alerts.log` - è­¦å‘Šå’Œç•°å¸¸è¨˜éŒ„

### åˆ†æå ±å‘Š
- `monitoring/training_report.md` - è¨“ç·´ç¸½çµå ±å‘Š
- `monitoring/loss_curves.png` - æå¤±æ›²ç·šåœ–
- `monitoring/metrics_curves.png` - æŒ‡æ¨™æ›²ç·šåœ–
- `monitoring/performance_stats.json` - æ•ˆèƒ½çµ±è¨ˆ

### è¦–è¦ºåŒ–
```
monitoring/plots/
â”œâ”€â”€ loss_history.png      # æå¤±æ­·å²
â”œâ”€â”€ map_history.png       # mAP æ­·å²
â”œâ”€â”€ pr_curves.png         # P-R æ›²ç·š
â””â”€â”€ confusion_matrix.png  # æ··æ·†çŸ©é™£
```

## ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1: é•·æ™‚é–“è¨“ç·´
```bash
# å•Ÿå‹•è¨“ç·´ï¼ˆèƒŒæ™¯åŸ·è¡Œï¼‰
nohup python src/training/train.py --epochs 200 > train.log 2>&1 &

# åœ¨å¦ä¸€å€‹çµ‚ç«¯ç›£æ§
/training-monitor --watch
```

### å ´æ™¯ 2: å¤šå¯¦é©—æ¯”è¼ƒ
```bash
# æ¯”è¼ƒå¤šå€‹å¯¦é©—
/training-monitor --compare runs/train/exp{1,2,3}
```

### å ´æ™¯ 3: ç•°å¸¸åµæ¸¬
```bash
# è‡ªå‹•ç›£æ§ä¸¦åœ¨ç•°å¸¸æ™‚åœæ­¢
/training-monitor --watch --auto-stop-on-error
```

### å ´æ™¯ 4: é ç«¯è¨“ç·´
```bash
# ç”Ÿæˆå ±å‘Šä¸¦ç™¼é€é€šçŸ¥
/training-monitor --report --notify email@example.com
```

## æœ€ä½³å¯¦è¸

### è¨“ç·´å‰
1. è¨­å®šç›£æ§é…ç½®
2. é…ç½®è­¦å‘Šé–¾å€¼
3. æº–å‚™é€šçŸ¥æ–¹å¼

### è¨“ç·´ä¸­
1. å®šæœŸæŸ¥çœ‹ç›£æ§å„€è¡¨æ¿
2. æ³¨æ„ç•°å¸¸è­¦å‘Š
3. è¨˜éŒ„é—œéµé‡Œç¨‹ç¢‘

### è¨“ç·´å¾Œ
1. ç”Ÿæˆå®Œæ•´åˆ†æå ±å‘Š
2. æª¢è¦–è¨“ç·´æ›²ç·š
3. ç¸½çµç¶“é©—æ•™è¨“

## æ•´åˆå»ºè­°

### èˆ‡å…¶ä»–å·¥å…·é…åˆ
```bash
# å®Œæ•´è¨“ç·´æµç¨‹
/train --epochs 100 &              # èƒŒæ™¯åŸ·è¡Œè¨“ç·´
/training-monitor --watch          # å³æ™‚ç›£æ§
# è¨“ç·´å®Œæˆå¾Œ
/model-optimizer                   # åˆ†æçµæœ
/validate                          # é©—è­‰æ•ˆèƒ½
```

### CI/CD æ•´åˆ
```yaml
# è‡ªå‹•åŒ–è¨“ç·´ç›£æ§
- name: Train Model
  run: python src/training/train.py --epochs 100

- name: Monitor Training
  run: claude /training-monitor --report

- name: Check Quality
  run: |
    map=$(cat monitoring/best_map.txt)
    if (( $(echo "$map < 0.7" | bc -l) )); then
      echo "Training failed: mAP too low"
      exit 1
    fi
```

## é€²éšåŠŸèƒ½

### è‡ªå‹•èª¿åƒ
ç›£æ§è¨“ç·´ç‹€æ…‹ä¸¦è‡ªå‹•èª¿æ•´è¶…åƒæ•¸ï¼š
- Loss åœæ»¯ â†’ é™ä½å­¸ç¿’ç‡
- éæ“¬åˆ â†’ å¢å¼·æ­£å‰‡åŒ–
- è¨“ç·´éå¿« â†’ æé«˜å­¸ç¿’ç‡

### é ç«¯ç›£æ§
æ”¯æ´é ç«¯æŸ¥çœ‹è¨“ç·´ç‹€æ…‹ï¼š
```bash
# å•Ÿå‹•ç›£æ§æœå‹™å™¨
/training-monitor --serve --port 8080

# ç€è¦½å™¨è¨ªå•
http://localhost:8080/dashboard
```

### Webhook é€šçŸ¥
```json
{
  "webhooks": {
    "on_training_complete": "https://hooks.slack.com/...",
    "on_best_model": "https://hooks.slack.com/...",
    "on_error": "https://hooks.slack.com/..."
  }
}
```

## ç–‘é›£æ’è§£

### ç›£æ§ç„¡æ³•å•Ÿå‹•
- æª¢æŸ¥è¨“ç·´æ˜¯å¦æ­£åœ¨é€²è¡Œ
- ç¢ºèª runs/ ç›®éŒ„æ¬Šé™
- æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒ

### æŒ‡æ¨™é¡¯ç¤ºç•°å¸¸
- ç¢ºèª results.csv å­˜åœ¨
- æª¢æŸ¥æª”æ¡ˆæ ¼å¼
- é‡æ–°æ•´ç†ç·©å­˜

### å³æ™‚æ›´æ–°å»¶é²
- èª¿æ•´ update_interval
- æª¢æŸ¥ç³»çµ±è³‡æº
- æ¸›å°‘ç›£æ§é …ç›®
